### 1. ğŸ¯ é¡¹ç›®æ¦‚è¿° (å·²æ›´æ–°)

 **ç›®æ ‡** ï¼šå¼€å‘ä¸€ä¸ª Demoï¼Œç”¨äºå±•ç¤ºä¸€ä¸ª AI è§’è‰²çš„å¤šä¸ªâ€œå®æ—¶çŠ¶æ€â€ï¼Œå¹¶å…è®¸ç”¨æˆ·é€šè¿‡ `Mood` èœå•è¿›è¡Œåˆ‡æ¢ã€‚

 **æ ¸å¿ƒä½“éªŒ** ï¼š

1. **å‰ç«¯ (App)** ï¼š

![1762978667721](image/character_status_display_admin_001/1762978667721.png)

* **æ ¸å¿ƒè§†å›¾** ï¼šApp å¯åŠ¨æ—¶åŠ è½½ä¸€ä¸ª AI è§’è‰²çš„ **é»˜è®¤ `Status`** ã€‚
* **æ‰‹åŠ¿ 1 (ç‚¹å‡»å·¦ä¸Šè§’ `[MOOD]`)** : ç”¨æˆ·ç‚¹å‡» `[MOOD: Tired]` æŒ‰é’®ï¼Œ **å±•å¼€ä¸€ä¸ªèœå•æµ®å±‚** ã€‚æ­¤æµ®å±‚åˆ—å‡ºäº†è¯¥ AI è§’è‰²çš„ **æ‰€æœ‰å…¶ä»– `Status`** ï¼ˆé€šè¿‡å®ƒä»¬çš„ `Mood` æˆ– `Title` æ˜¾ç¤ºï¼‰ã€‚ç”¨æˆ·ç‚¹å‡»èœå•ä¸­çš„å¦ä¸€é¡¹ï¼ˆä¾‹å¦‚ "Energetic"ï¼‰ï¼Œ **æ•´ä¸ªè§†å›¾å°†åˆ‡æ¢åˆ°å¯¹åº”çš„ `Status`** ã€‚
* **æ‰‹åŠ¿ 2 (ç‚¹å‡» `[NOW]` / `[HEALTH]`)** : åœ¨**å½“å‰** `Status` å†…éƒ¨ï¼Œç”¨æˆ·ç‚¹å‡» `[NOW]` æˆ– `[HEALTH]` æŒ‰é’®æ¥**å±•å¼€/æŠ˜å **ä¿¡æ¯å›¾å±‚ã€‚
* **èƒŒæ™¯ (è‡ªåŠ¨)** ï¼šåœ¨**å½“å‰** `Status` è§†å›¾ä¸­ï¼ŒèƒŒæ™¯è§†é¢‘ä¼šæŒ‰åˆ—è¡¨**è‡ªåŠ¨ã€é¡ºåºã€æ— é™å¾ªç¯**æ’­æ”¾ã€‚

1. **åç«¯ (Admin)** ï¼š

* ç®¡ç†å‘˜å¯ä»¥ç‹¬ç«‹åˆ›å»º `AI Characters` åŠå…¶ `Assets` å’Œ `System Prompts`ã€‚
* ç®¡ç†å‘˜å¯ä»¥ä¸º**ä¸€ä¸ª** `AI Character` åˆ›å»º**å¤šä¸ª** `Status`ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ª `Mood` ä¸º "Tired" çš„ Statusï¼Œä¸€ä¸ª `Mood` ä¸º "Energetic" çš„ Statusï¼‰ã€‚
* æ¯ä¸ª `Status` éƒ½é€šè¿‡ Gen-AI å·¥ä½œæµç‹¬ç«‹ç”Ÿæˆå…¶å†…å®¹ï¼ˆè§†é¢‘ã€å›¾å±‚æ–‡æœ¬ç­‰ï¼‰ã€‚

---

### 2. ğŸ›ï¸ æ•°æ®åº“è®¾è®¡ (Supabase)

æ•°æ®åº“ç»“æ„ä¿æŒä¸å˜ï¼ˆ4 ä¸ªç‹¬ç«‹è¡¨æ ¼ï¼‰ã€‚è¿™ä¸ªè®¾è®¡**å·²ç»æ”¯æŒ**ä¸€ä¸ª `ai_character` æ‹¥æœ‰å¤šä¸ª `character_statuses`ï¼Œå®Œç¾å¥‘åˆæ–°çš„åˆ‡æ¢éœ€æ±‚ã€‚

**Code snippet**

```
+---------------------------+      +---------------------------+
| ai_characters (NEW)       |      | character_assets (Global) |
| (ç‹¬ç«‹çš„è§’è‰²è¡¨)              |      | (å…¨å±€èµ„äº§åº“)              |
|---------------------------|      |---------------------------|
| character_id (PK, uuid)   |      | asset_id (PK)             |
| name (text)               |      | asset_name (text)         |
| avatar_url (text)         |      | asset_type ('æœé¥°','åœ°ç‚¹')|
+---------------------------+      | image_url (text, ä¸Šä¼ )    |
        |                            +---------------------------+
        +----------------------------+
        | 1..* (ä¸€ä¸ª AI æœ‰å¤šä¸ª Status) |
        v                            v
+-----------------------------+    +---------------------------+
| character_statuses          |    | system_prompts            |
| (æ ¸å¿ƒçŠ¶æ€è¡¨ - åè§„èŒƒåŒ–)       |    | (å…¨å±€ Prompt ç®¡ç†)        |
|-----------------------------|    |---------------------------|
| status_id (PK)              |    | prompt_id (PK, uuid)      |
| character_id (FK) ----------+    | prompt_name (text)        |
| title (Internal)            |    |  (e.g., "IMAGE_GEN")      |
| mood (text)                 |    | prompt_content (text)     |
|                             |    +---------------------------+
| (Gen-AI æ ¸å¿ƒè¾“å…¥)           |
| status_description (text)   |
| selected_asset_ids (uuid[]) |
|                             |
| (Gen-AI æ ¸å¿ƒè¾“å‡º)           |
| starting_image_url (text)   |
| videos_playlist (jsonb)     |
|   -> [{"url": "...", "prompt": "..."}, ...]
|                             |
| overlays_content (jsonb)    |
|   -> {"now": ..., "health": ...}
|                             |
| suggestions_list (text[])   |
+-----------------------------+
```

---

### 3. ğŸ–¥ï¸ åç«¯ç®¡ç†å¹³å° - äº¤äº’é€»è¾‘

åå°é€»è¾‘åŸºæœ¬ä¸å˜ï¼Œå› ä¸ºå®ƒå·²ç»æ”¯æŒâ€œä¸€å¯¹å¤šâ€ï¼ˆä¸€ä¸ª Character å¯¹åº”å¤šä¸ª Statusï¼‰çš„ç®¡ç†ã€‚

**P1: AI Character ç®¡ç†**

* **åŠŸèƒ½** : å¯¹ `ai_characters` è¡¨è¿›è¡Œç®€å•çš„ CRUDã€‚

**P4: å…¨å±€ Asset ç®¡ç†**

* **åŠŸèƒ½** : ç®¡ç† `character_assets` è¡¨ã€‚

**P3: System Prompt ç®¡ç†**

* **åŠŸèƒ½** : ç®¡ç† `system_prompts` è¡¨ã€‚

**P2: Status ç®¡ç†**

* **åŠŸèƒ½** : æ ¸å¿ƒ Gen-AI å·¥ä½œæµï¼Œ **æ­¤é¡µé¢æ˜¯åˆ›å»ºå¤šä¸ª `Status` çš„åœ°æ–¹** ã€‚
* **é€»è¾‘** : ç®¡ç†å‘˜é€šè¿‡æ­¤é¡µé¢ï¼Œä¸ºé€‰å®šçš„ "Alex" åˆ›å»º**å¤šä¸ª** `Status` æ¡ç›®ã€‚

**Code snippet**

```
+-------------------------------------------------------------+
| P2: Status ç®¡ç†                                             |
+-------------------------------------------------------------+
|  é€‰æ‹© AI Character:  ( Alex   v )  <-- (æ¥è‡ª P1 çš„åˆ—è¡¨)     |
|-------------------------------------------------------------|
|  "Alex" çš„ Statuses: (å‰ç«¯å°†é€šè¿‡ç‚¹å‡» Mood åœ¨è¿™äº›ä¹‹é—´åˆ‡æ¢)   |
|                                                             |
|  Mood    | å†…éƒ¨æ ‡é¢˜       | æ“ä½œ                           |
|----------|----------------|--------------------------------|
| "Tired"  | "åˆšå¥å®Œèº«"     | [ç¼–è¾‘] [åˆ é™¤]                  |
| "Calm"   | "æ¸…æ™¨å†¥æƒ³"     | [ç¼–è¾‘] [åˆ é™¤]                  |
| "Social" | "å‡†å¤‡å‚åŠ æ´¾å¯¹" | [ç¼–è¾‘] [åˆ é™¤]                  |
|                                                             |
|  [ + åˆ›å»ºä¸€ä¸ªæ–°çš„ Status ] (ç‚¹å‡»è¿›å…¥ä¸‹é¢çš„ç¼–è¾‘å™¨)           |
+-------------------------------------------------------------+

(ç¼–è¾‘å™¨é€»è¾‘ä¸å˜ï¼šç®¡ç†å‘˜åœ¨åˆ›å»ºæ—¶å¡«å†™ 'Mood' å­—æ®µï¼Œå¹¶å®Œæˆ Gen-AI å·¥ä½œæµ)

+-------------------------------------------------------------+
| P2 (ç»­): Status ç¼–è¾‘å™¨ (è§’è‰²: Alex)                         |
+-------------------------------------------------------------+
| 0. æ ¸å¿ƒè¾“å…¥                                                 |
| å†…éƒ¨æ ‡é¢˜: [ åˆšå¥å®Œèº« ]                                        |
| Mood:     [ Tired ] <--- (è¿™ä¸ªå­—æ®µå°†æ˜¾ç¤ºåœ¨å‰ç«¯èœå•ä¸­)       |
| çŠ¶æ€æè¿°: [ (Alex åˆšåšå®Œ 1 å°æ—¶æ™®æ‹‰æ...) ]                 |
| ... (Gen-AI å·¥ä½œæµ) ...                                     |
| [ (ä¸€é”®ä¿å­˜ Status) ]                                       |
+-------------------------------------------------------------+
```

---

### 4. ğŸ“± å‰ç«¯ App - äº¤äº’é€»è¾‘

#### A. æ ¸å¿ƒäº¤äº’å›¾ (å·²æ›´æ–°)

æ­¤å›¾å±•ç¤ºäº†å…¨æ–°çš„ã€ç”± `[MOOD]` æŒ‰é’®é©±åŠ¨çš„ `Status` åˆ‡æ¢æµç¨‹ã€‚

**Code snippet**

```
    (åˆå§‹çŠ¶æ€: åŠ è½½ "åˆšå¥å®Œèº«" Status)
+---------------------------------------+
|  [MOOD: Tired]  <-- (1. ç”¨æˆ·ç‚¹å‡»è¿™é‡Œ) |
|                                       |
|         ( è§†é¢‘ A æ­£åœ¨æ’­æ”¾... )         |  <-- (è‡ªåŠ¨è½®æ’­)
|                                       |
|  [NOW]    [HEALTH]                    |  <-- (ç‚¹å‡»å¯å±•å¼€)
|                                       |
|  [ Get lunch... ] [ Walk around... ]  |
+---------------------------------------+
                |
                v
    (æµ®å±‚å±•å¼€: æ˜¾ç¤º "Alex" çš„æ‰€æœ‰ Status)
+---------------------------------------+
|  [MOOD: Tired]  <-- (å½“å‰)            |
|  +---------------------------------+  |
|  | (o) Tired  (åˆšå¥å®Œèº«)           |  |
|  | ( ) Calm   (æ¸…æ™¨å†¥æƒ³) <--(2. ç”¨æˆ·ç‚¹å‡») |
|  | ( ) Social (å‡†å¤‡å‚åŠ æ´¾å¯¹)        |  |
|  +---------------------------------+  |
|                                       |
|  [NOW]    [HEALTH]                    |
+---------------------------------------+
                |
                v
    (è§†å›¾é‡ç½®: åŠ è½½ "æ¸…æ™¨å†¥æƒ³" Status)
+---------------------------------------+
|  [MOOD: Calm]   <-- (UI æ›´æ–°)         |
|                                       |
|         ( "æ¸…æ™¨" è§†é¢‘ 1 å¼€å§‹æ’­æ”¾... )  |  <-- (æ–°è§†é¢‘åˆ—è¡¨)
|                                       |
|  [NOW]    [HEALTH]                    |  <-- (å›¾å±‚é‡ç½®ä¸ºæŠ˜å )
|                                       |
|  [ Take a deep... ] [ Meditate... ]  |  <-- (æ–°å»ºè®®)
+---------------------------------------+
```

#### B. äº¤äº’é€»è¾‘è¯´æ˜ (å·²æ›´æ–°)

1. **åº”ç”¨åŠ è½½** :

* App å¯åŠ¨ï¼Œè·å–**ä¸€ä¸ª** AI Character (`character_id`) çš„**æ‰€æœ‰** `character_statuses` åˆ—è¡¨ã€‚
* é»˜è®¤åŠ è½½åˆ—è¡¨ä¸­çš„**ç¬¬ä¸€ä¸ª** `Status`ï¼ˆä¾‹å¦‚ `Mood: Tired`ï¼‰ã€‚

1. **äº¤äº’ 1: åˆ‡æ¢ Status (ç‚¹å‡» `[MOOD]` èœå•)**
   * **æ‰‹åŠ¿** : ç”¨æˆ·ç‚¹å‡»å±å¹•å·¦ä¸Šè§’çš„ `[MOOD: Tired]` æŒ‰é’®ã€‚
   * **å“åº”** : ä¸€ä¸ªèœå•æµ®å±‚å±•å¼€ï¼Œæ˜¾ç¤º**æ‰€æœ‰**å·²åŠ è½½çš„ `Status` åˆ—è¡¨ï¼ˆé€šè¿‡ `mood` æˆ– `title` å­—æ®µæ˜¾ç¤ºï¼‰ã€‚
   * **æ‰‹åŠ¿ (ç»­)** : ç”¨æˆ·ç‚¹å‡»èœå•ä¸­çš„ä¸€ä¸ª**æ–°**é€‰é¡¹ï¼ˆä¾‹å¦‚ `[Calm]`ï¼‰ã€‚
   * **å“åº” (è§†å›¾é‡ç½®)** : æµ®å±‚å…³é—­ã€‚App **å¸è½½**å½“å‰ Status çš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶**åŠ è½½**æ‰€é€‰ `Status` çš„æ•°æ®ã€‚
   * **è§†é¢‘** : `videos_playlist` è¢«æ›¿æ¢ï¼Œå¹¶ä»ç¬¬ 1 ä¸ªè§†é¢‘å¼€å§‹æ’­æ”¾ã€‚
   * **å›¾å±‚** : `[NOW]` å’Œ `[HEALTH]` é‡ç½®ä¸ºæŠ˜å çŠ¶æ€ï¼Œå…¶å†…å®¹æ›´æ–°ä¸ºæ–° Status çš„å†…å®¹ã€‚
   * **å»ºè®®** : `suggestions_list` è¢«æ›¿æ¢ä¸ºæ–° Status çš„å»ºè®®ã€‚
   * **UI** : å·¦ä¸Šè§’çš„ `[MOOD]` æŒ‰é’®æ–‡æœ¬æ›´æ–°ä¸º `[MOOD: Calm]`ã€‚
2. **äº¤äº’ 2: å±•å¼€å›¾å±‚ (ç‚¹å‡» `[NOW]` / `[HEALTH]`)**
   * **æ‰‹åŠ¿** : ç”¨æˆ·ç‚¹å‡» `[NOW]` æˆ– `[HEALTH]` æŒ‰é’®/çƒ­åŒºã€‚
   * **å“åº”** : åœ¨**å½“å‰** `Status` ä¸‹ï¼Œå¯¹åº”çš„å›¾å±‚ä¿¡æ¯å±•å¼€/æŠ˜å ã€‚
   * **ä¸å˜** : æ­¤æ“ä½œ**ä¸ä¼š**è§¦å‘ Status åˆ‡æ¢ã€‚
3. **äº¤äº’ 3: è§†é¢‘è½®æ’­ (è‡ªåŠ¨)**
   * **è§¦å‘** : **å½“å‰** `Status` çš„ `videos_playlist` ä¸­çš„è§†é¢‘æ’­æ”¾å®Œæ¯•ã€‚
   * **å“åº”** : è‡ªåŠ¨åŠ è½½å¹¶æ’­æ”¾è¯¥åˆ—è¡¨ä¸­çš„**ä¸‹ä¸€ä¸ª**è§†é¢‘ï¼Œ **æ— é™å¾ªç¯** ã€‚
   * **ä¸å˜** : æ­¤æ“ä½œ**ä¸ä¼š**è§¦å‘ Status åˆ‡æ¢ã€‚
